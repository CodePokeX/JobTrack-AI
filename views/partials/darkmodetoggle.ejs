<!-- Dark Mode Toggle Button -->
<button class="btn btn-circle fixed bottom-5 right-5 p-3 border-2 border-black dark:border-white bg-transparent transition-all duration-300"
        onclick="toggleTheme()" 
        id="dark-mode-button">
    <i id="dark-mode-toggle" class="fas fa-moon text-black dark:text-white transition-all duration-300"></i>
</button>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const savedTheme = localStorage.getItem("corpusTheme") || getSystemTheme();
    setTheme(savedTheme);
});

function getSystemTheme() {
    return window.matchMedia("(prefers-color-scheme: dark)").matches ? "night" : "myblueLight";
}

function toggleTheme() {
    const currentTheme = document.documentElement.getAttribute("data-theme") || "myblueLight";
    const newTheme = (currentTheme === "myblueLight") ? "night" : "myblueLight";
    setTheme(newTheme);
}

function setTheme(theme) {
    document.documentElement.setAttribute("data-theme", theme);
    const icon = document.getElementById("dark-mode-toggle");
    const button = document.getElementById("dark-mode-button");

    if (theme === "night") {
        icon.classList.replace("fa-moon", "fa-sun");
        button.classList.replace("border-black", "border-white");
    } else {
        icon.classList.replace("fa-sun", "fa-moon");
        button.classList.replace("border-white", "border-black");
    }

    localStorage.setItem("corpusTheme", theme);
}
</script>
